
use psmv;

DELIMITER ;;

DROP EVENT IF EXISTS snapshot_performance_schema;;

CREATE DEFINER=root@localhost EVENT snapshot_performance_schema
ON SCHEDULE
EVERY 30 SECOND
ON COMPLETION PRESERVE
ENABLE
COMMENT 'Collect global performance_schema information'
DO
BEGIN
  SET BINLOG_FORMAT=ROW; 
  SELECT GET_LOCK('ps_snapshot_lock',0) INTO @have_lock;
  IF @have_lock = 1 THEN
    START TRANSACTION;
    CREATE TEMPORARY TABLE psmv.snapshot ( key(table_name) ) as ( SELECT now(6) as ts, @@server_id as server_id,'table_lock_waits_summary_by_table' as table_name,OBJECT_TYPE AS col1,OBJECT_SCHEMA AS col2,OBJECT_NAME AS col3,COUNT_STAR AS col4,SUM_TIMER_WAIT AS col5,MIN_TIMER_WAIT AS col6,AVG_TIMER_WAIT AS col7,MAX_TIMER_WAIT AS col8,COUNT_READ AS col9,SUM_TIMER_READ AS col10,MIN_TIMER_READ AS col11,AVG_TIMER_READ AS col12,MAX_TIMER_READ AS col13,COUNT_WRITE AS col14,SUM_TIMER_WRITE AS col15,MIN_TIMER_WRITE AS col16,AVG_TIMER_WRITE AS col17,MAX_TIMER_WRITE AS col18,COUNT_READ_NORMAL AS col19,SUM_TIMER_READ_NORMAL AS col20,MIN_TIMER_READ_NORMAL AS col21,AVG_TIMER_READ_NORMAL AS col22,MAX_TIMER_READ_NORMAL AS col23,COUNT_READ_WITH_SHARED_LOCKS AS col24,SUM_TIMER_READ_WITH_SHARED_LOCKS AS col25,MIN_TIMER_READ_WITH_SHARED_LOCKS AS col26,AVG_TIMER_READ_WITH_SHARED_LOCKS AS col27,MAX_TIMER_READ_WITH_SHARED_LOCKS AS col28,COUNT_READ_HIGH_PRIORITY AS col29,SUM_TIMER_READ_HIGH_PRIORITY AS col30,MIN_TIMER_READ_HIGH_PRIORITY AS col31,AVG_TIMER_READ_HIGH_PRIORITY AS col32,MAX_TIMER_READ_HIGH_PRIORITY AS col33,COUNT_READ_NO_INSERT AS col34,SUM_TIMER_READ_NO_INSERT AS col35,MIN_TIMER_READ_NO_INSERT AS col36,AVG_TIMER_READ_NO_INSERT AS col37,MAX_TIMER_READ_NO_INSERT AS col38,COUNT_READ_EXTERNAL AS col39,SUM_TIMER_READ_EXTERNAL AS col40,MIN_TIMER_READ_EXTERNAL AS col41,AVG_TIMER_READ_EXTERNAL AS col42,MAX_TIMER_READ_EXTERNAL AS col43,COUNT_WRITE_ALLOW_WRITE AS col44,SUM_TIMER_WRITE_ALLOW_WRITE AS col45,MIN_TIMER_WRITE_ALLOW_WRITE AS col46,AVG_TIMER_WRITE_ALLOW_WRITE AS col47,MAX_TIMER_WRITE_ALLOW_WRITE AS col48,COUNT_WRITE_CONCURRENT_INSERT AS col49,SUM_TIMER_WRITE_CONCURRENT_INSERT AS col50,MIN_TIMER_WRITE_CONCURRENT_INSERT AS col51,AVG_TIMER_WRITE_CONCURRENT_INSERT AS col52,MAX_TIMER_WRITE_CONCURRENT_INSERT AS col53,COUNT_WRITE_DELAYED AS col54,SUM_TIMER_WRITE_DELAYED AS col55,MIN_TIMER_WRITE_DELAYED AS col56,AVG_TIMER_WRITE_DELAYED AS col57,MAX_TIMER_WRITE_DELAYED AS col58,COUNT_WRITE_LOW_PRIORITY AS col59,SUM_TIMER_WRITE_LOW_PRIORITY AS col60,MIN_TIMER_WRITE_LOW_PRIORITY AS col61,AVG_TIMER_WRITE_LOW_PRIORITY AS col62,MAX_TIMER_WRITE_LOW_PRIORITY AS col63,COUNT_WRITE_NORMAL AS col64,SUM_TIMER_WRITE_NORMAL AS col65,MIN_TIMER_WRITE_NORMAL AS col66,AVG_TIMER_WRITE_NORMAL AS col67,MAX_TIMER_WRITE_NORMAL AS col68,COUNT_WRITE_EXTERNAL AS col69,SUM_TIMER_WRITE_EXTERNAL AS col70,MIN_TIMER_WRITE_EXTERNAL AS col71,AVG_TIMER_WRITE_EXTERNAL AS col72,MAX_TIMER_WRITE_EXTERNAL AS col73 from performance_schema.table_lock_waits_summary_by_table )
UNION ALL
( SELECT now(6) as ts, @@server_id as server_id,'events_statements_history_long' as table_name,THREAD_ID AS col1,EVENT_ID AS col2,END_EVENT_ID AS col3,EVENT_NAME AS col4,SOURCE AS col5,TIMER_START AS col6,TIMER_END AS col7,TIMER_WAIT AS col8,LOCK_TIME AS col9,SQL_TEXT AS col10,DIGEST AS col11,DIGEST_TEXT AS col12,CURRENT_SCHEMA AS col13,OBJECT_TYPE AS col14,OBJECT_SCHEMA AS col15,OBJECT_NAME AS col16,OBJECT_INSTANCE_BEGIN AS col17,MYSQL_ERRNO AS col18,RETURNED_SQLSTATE AS col19,MESSAGE_TEXT AS col20,ERRORS AS col21,WARNINGS AS col22,ROWS_AFFECTED AS col23,ROWS_SENT AS col24,ROWS_EXAMINED AS col25,CREATED_TMP_DISK_TABLES AS col26,CREATED_TMP_TABLES AS col27,SELECT_FULL_JOIN AS col28,SELECT_FULL_RANGE_JOIN AS col29,SELECT_RANGE AS col30,SELECT_RANGE_CHECK AS col31,SELECT_SCAN AS col32,SORT_MERGE_PASSES AS col33,SORT_RANGE AS col34,SORT_ROWS AS col35,SORT_SCAN AS col36,NO_INDEX_USED AS col37,NO_GOOD_INDEX_USED AS col38,NESTING_EVENT_ID AS col39,NESTING_EVENT_TYPE AS col40,null as col41,null as col42,null as col43,null as col44,null as col45,null as col46,null as col47,null as col48,null as col49,null as col50,null as col51,null as col52,null as col53,null as col54,null as col55,null as col56,null as col57,null as col58,null as col59,null as col60,null as col61,null as col62,null as col63,null as col64,null as col65,null as col66,null as col67,null as col68,null as col69,null as col70,null as col71,null as col72,null as col73 from performance_schema.events_statements_history_long )
UNION ALL
( SELECT now(6) as ts, @@server_id as server_id,'events_statements_history' as table_name,THREAD_ID AS col1,EVENT_ID AS col2,END_EVENT_ID AS col3,EVENT_NAME AS col4,SOURCE AS col5,TIMER_START AS col6,TIMER_END AS col7,TIMER_WAIT AS col8,LOCK_TIME AS col9,SQL_TEXT AS col10,DIGEST AS col11,DIGEST_TEXT AS col12,CURRENT_SCHEMA AS col13,OBJECT_TYPE AS col14,OBJECT_SCHEMA AS col15,OBJECT_NAME AS col16,OBJECT_INSTANCE_BEGIN AS col17,MYSQL_ERRNO AS col18,RETURNED_SQLSTATE AS col19,MESSAGE_TEXT AS col20,ERRORS AS col21,WARNINGS AS col22,ROWS_AFFECTED AS col23,ROWS_SENT AS col24,ROWS_EXAMINED AS col25,CREATED_TMP_DISK_TABLES AS col26,CREATED_TMP_TABLES AS col27,SELECT_FULL_JOIN AS col28,SELECT_FULL_RANGE_JOIN AS col29,SELECT_RANGE AS col30,SELECT_RANGE_CHECK AS col31,SELECT_SCAN AS col32,SORT_MERGE_PASSES AS col33,SORT_RANGE AS col34,SORT_ROWS AS col35,SORT_SCAN AS col36,NO_INDEX_USED AS col37,NO_GOOD_INDEX_USED AS col38,NESTING_EVENT_ID AS col39,NESTING_EVENT_TYPE AS col40,null as col41,null as col42,null as col43,null as col44,null as col45,null as col46,null as col47,null as col48,null as col49,null as col50,null as col51,null as col52,null as col53,null as col54,null as col55,null as col56,null as col57,null as col58,null as col59,null as col60,null as col61,null as col62,null as col63,null as col64,null as col65,null as col66,null as col67,null as col68,null as col69,null as col70,null as col71,null as col72,null as col73 from performance_schema.events_statements_history )
UNION ALL
( SELECT now(6) as ts, @@server_id as server_id,'events_statements_current' as table_name,THREAD_ID AS col1,EVENT_ID AS col2,END_EVENT_ID AS col3,EVENT_NAME AS col4,SOURCE AS col5,TIMER_START AS col6,TIMER_END AS col7,TIMER_WAIT AS col8,LOCK_TIME AS col9,SQL_TEXT AS col10,DIGEST AS col11,DIGEST_TEXT AS col12,CURRENT_SCHEMA AS col13,OBJECT_TYPE AS col14,OBJECT_SCHEMA AS col15,OBJECT_NAME AS col16,OBJECT_INSTANCE_BEGIN AS col17,MYSQL_ERRNO AS col18,RETURNED_SQLSTATE AS col19,MESSAGE_TEXT AS col20,ERRORS AS col21,WARNINGS AS col22,ROWS_AFFECTED AS col23,ROWS_SENT AS col24,ROWS_EXAMINED AS col25,CREATED_TMP_DISK_TABLES AS col26,CREATED_TMP_TABLES AS col27,SELECT_FULL_JOIN AS col28,SELECT_FULL_RANGE_JOIN AS col29,SELECT_RANGE AS col30,SELECT_RANGE_CHECK AS col31,SELECT_SCAN AS col32,SORT_MERGE_PASSES AS col33,SORT_RANGE AS col34,SORT_ROWS AS col35,SORT_SCAN AS col36,NO_INDEX_USED AS col37,NO_GOOD_INDEX_USED AS col38,NESTING_EVENT_ID AS col39,NESTING_EVENT_TYPE AS col40,null as col41,null as col42,null as col43,null as col44,null as col45,null as col46,null as col47,null as col48,null as col49,null as col50,null as col51,null as col52,null as col53,null as col54,null as col55,null as col56,null as col57,null as col58,null as col59,null as col60,null as col61,null as col62,null as col63,null as col64,null as col65,null as col66,null as col67,null as col68,null as col69,null as col70,null as col71,null as col72,null as col73 from performance_schema.events_statements_current )
UNION ALL
( SELECT now(6) as ts, @@server_id as server_id,'table_io_waits_summary_by_index_usage' as table_name,OBJECT_TYPE AS col1,OBJECT_SCHEMA AS col2,OBJECT_NAME AS col3,INDEX_NAME AS col4,COUNT_STAR AS col5,SUM_TIMER_WAIT AS col6,MIN_TIMER_WAIT AS col7,AVG_TIMER_WAIT AS col8,MAX_TIMER_WAIT AS col9,COUNT_READ AS col10,SUM_TIMER_READ AS col11,MIN_TIMER_READ AS col12,AVG_TIMER_READ AS col13,MAX_TIMER_READ AS col14,COUNT_WRITE AS col15,SUM_TIMER_WRITE AS col16,MIN_TIMER_WRITE AS col17,AVG_TIMER_WRITE AS col18,MAX_TIMER_WRITE AS col19,COUNT_FETCH AS col20,SUM_TIMER_FETCH AS col21,MIN_TIMER_FETCH AS col22,AVG_TIMER_FETCH AS col23,MAX_TIMER_FETCH AS col24,COUNT_INSERT AS col25,SUM_TIMER_INSERT AS col26,MIN_TIMER_INSERT AS col27,AVG_TIMER_INSERT AS col28,MAX_TIMER_INSERT AS col29,COUNT_UPDATE AS col30,SUM_TIMER_UPDATE AS col31,MIN_TIMER_UPDATE AS col32,AVG_TIMER_UPDATE AS col33,MAX_TIMER_UPDATE AS col34,COUNT_DELETE AS col35,SUM_TIMER_DELETE AS col36,MIN_TIMER_DELETE AS col37,AVG_TIMER_DELETE AS col38,MAX_TIMER_DELETE AS col39,null as col40,null as col41,null as col42,null as col43,null as col44,null as col45,null as col46,null as col47,null as col48,null as col49,null as col50,null as col51,null as col52,null as col53,null as col54,null as col55,null as col56,null as col57,null as col58,null as col59,null as col60,null as col61,null as col62,null as col63,null as col64,null as col65,null as col66,null as col67,null as col68,null as col69,null as col70,null as col71,null as col72,null as col73 from performance_schema.table_io_waits_summary_by_index_usage )
UNION ALL
( SELECT now(6) as ts, @@server_id as server_id,'table_io_waits_summary_by_table' as table_name,OBJECT_TYPE AS col1,OBJECT_SCHEMA AS col2,OBJECT_NAME AS col3,COUNT_STAR AS col4,SUM_TIMER_WAIT AS col5,MIN_TIMER_WAIT AS col6,AVG_TIMER_WAIT AS col7,MAX_TIMER_WAIT AS col8,COUNT_READ AS col9,SUM_TIMER_READ AS col10,MIN_TIMER_READ AS col11,AVG_TIMER_READ AS col12,MAX_TIMER_READ AS col13,COUNT_WRITE AS col14,SUM_TIMER_WRITE AS col15,MIN_TIMER_WRITE AS col16,AVG_TIMER_WRITE AS col17,MAX_TIMER_WRITE AS col18,COUNT_FETCH AS col19,SUM_TIMER_FETCH AS col20,MIN_TIMER_FETCH AS col21,AVG_TIMER_FETCH AS col22,MAX_TIMER_FETCH AS col23,COUNT_INSERT AS col24,SUM_TIMER_INSERT AS col25,MIN_TIMER_INSERT AS col26,AVG_TIMER_INSERT AS col27,MAX_TIMER_INSERT AS col28,COUNT_UPDATE AS col29,SUM_TIMER_UPDATE AS col30,MIN_TIMER_UPDATE AS col31,AVG_TIMER_UPDATE AS col32,MAX_TIMER_UPDATE AS col33,COUNT_DELETE AS col34,SUM_TIMER_DELETE AS col35,MIN_TIMER_DELETE AS col36,AVG_TIMER_DELETE AS col37,MAX_TIMER_DELETE AS col38,null as col39,null as col40,null as col41,null as col42,null as col43,null as col44,null as col45,null as col46,null as col47,null as col48,null as col49,null as col50,null as col51,null as col52,null as col53,null as col54,null as col55,null as col56,null as col57,null as col58,null as col59,null as col60,null as col61,null as col62,null as col63,null as col64,null as col65,null as col66,null as col67,null as col68,null as col69,null as col70,null as col71,null as col72,null as col73 from performance_schema.table_io_waits_summary_by_table )
UNION ALL
( SELECT now(6) as ts, @@server_id as server_id,'events_statements_summary_by_digest' as table_name,SCHEMA_NAME AS col1,DIGEST AS col2,DIGEST_TEXT AS col3,COUNT_STAR AS col4,SUM_TIMER_WAIT AS col5,MIN_TIMER_WAIT AS col6,AVG_TIMER_WAIT AS col7,MAX_TIMER_WAIT AS col8,SUM_LOCK_TIME AS col9,SUM_ERRORS AS col10,SUM_WARNINGS AS col11,SUM_ROWS_AFFECTED AS col12,SUM_ROWS_SENT AS col13,SUM_ROWS_EXAMINED AS col14,SUM_CREATED_TMP_DISK_TABLES AS col15,SUM_CREATED_TMP_TABLES AS col16,SUM_SELECT_FULL_JOIN AS col17,SUM_SELECT_FULL_RANGE_JOIN AS col18,SUM_SELECT_RANGE AS col19,SUM_SELECT_RANGE_CHECK AS col20,SUM_SELECT_SCAN AS col21,SUM_SORT_MERGE_PASSES AS col22,SUM_SORT_RANGE AS col23,SUM_SORT_ROWS AS col24,SUM_SORT_SCAN AS col25,SUM_NO_INDEX_USED AS col26,SUM_NO_GOOD_INDEX_USED AS col27,FIRST_SEEN AS col28,LAST_SEEN AS col29,null as col30,null as col31,null as col32,null as col33,null as col34,null as col35,null as col36,null as col37,null as col38,null as col39,null as col40,null as col41,null as col42,null as col43,null as col44,null as col45,null as col46,null as col47,null as col48,null as col49,null as col50,null as col51,null as col52,null as col53,null as col54,null as col55,null as col56,null as col57,null as col58,null as col59,null as col60,null as col61,null as col62,null as col63,null as col64,null as col65,null as col66,null as col67,null as col68,null as col69,null as col70,null as col71,null as col72,null as col73 from performance_schema.events_statements_summary_by_digest )
UNION ALL
( SELECT now(6) as ts, @@server_id as server_id,'host_cache' as table_name,IP AS col1,HOST AS col2,HOST_VALIDATED AS col3,SUM_CONNECT_ERRORS AS col4,COUNT_HOST_BLOCKED_ERRORS AS col5,COUNT_NAMEINFO_TRANSIENT_ERRORS AS col6,COUNT_NAMEINFO_PERMANENT_ERRORS AS col7,COUNT_FORMAT_ERRORS AS col8,COUNT_ADDRINFO_TRANSIENT_ERRORS AS col9,COUNT_ADDRINFO_PERMANENT_ERRORS AS col10,COUNT_FCRDNS_ERRORS AS col11,COUNT_HOST_ACL_ERRORS AS col12,COUNT_NO_AUTH_PLUGIN_ERRORS AS col13,COUNT_AUTH_PLUGIN_ERRORS AS col14,COUNT_HANDSHAKE_ERRORS AS col15,COUNT_PROXY_USER_ERRORS AS col16,COUNT_PROXY_USER_ACL_ERRORS AS col17,COUNT_AUTHENTICATION_ERRORS AS col18,COUNT_SSL_ERRORS AS col19,COUNT_MAX_USER_CONNECTIONS_ERRORS AS col20,COUNT_MAX_USER_CONNECTIONS_PER_HOUR_ERRORS AS col21,COUNT_DEFAULT_DATABASE_ERRORS AS col22,COUNT_INIT_CONNECT_ERRORS AS col23,COUNT_LOCAL_ERRORS AS col24,COUNT_UNKNOWN_ERRORS AS col25,FIRST_SEEN AS col26,LAST_SEEN AS col27,FIRST_ERROR_SEEN AS col28,LAST_ERROR_SEEN AS col29,null as col30,null as col31,null as col32,null as col33,null as col34,null as col35,null as col36,null as col37,null as col38,null as col39,null as col40,null as col41,null as col42,null as col43,null as col44,null as col45,null as col46,null as col47,null as col48,null as col49,null as col50,null as col51,null as col52,null as col53,null as col54,null as col55,null as col56,null as col57,null as col58,null as col59,null as col60,null as col61,null as col62,null as col63,null as col64,null as col65,null as col66,null as col67,null as col68,null as col69,null as col70,null as col71,null as col72,null as col73 from performance_schema.host_cache )
UNION ALL
( SELECT now(6) as ts, @@server_id as server_id,'events_statements_summary_by_account_by_event_name' as table_name,USER AS col1,HOST AS col2,EVENT_NAME AS col3,COUNT_STAR AS col4,SUM_TIMER_WAIT AS col5,MIN_TIMER_WAIT AS col6,AVG_TIMER_WAIT AS col7,MAX_TIMER_WAIT AS col8,SUM_LOCK_TIME AS col9,SUM_ERRORS AS col10,SUM_WARNINGS AS col11,SUM_ROWS_AFFECTED AS col12,SUM_ROWS_SENT AS col13,SUM_ROWS_EXAMINED AS col14,SUM_CREATED_TMP_DISK_TABLES AS col15,SUM_CREATED_TMP_TABLES AS col16,SUM_SELECT_FULL_JOIN AS col17,SUM_SELECT_FULL_RANGE_JOIN AS col18,SUM_SELECT_RANGE AS col19,SUM_SELECT_RANGE_CHECK AS col20,SUM_SELECT_SCAN AS col21,SUM_SORT_MERGE_PASSES AS col22,SUM_SORT_RANGE AS col23,SUM_SORT_ROWS AS col24,SUM_SORT_SCAN AS col25,SUM_NO_INDEX_USED AS col26,SUM_NO_GOOD_INDEX_USED AS col27,null as col28,null as col29,null as col30,null as col31,null as col32,null as col33,null as col34,null as col35,null as col36,null as col37,null as col38,null as col39,null as col40,null as col41,null as col42,null as col43,null as col44,null as col45,null as col46,null as col47,null as col48,null as col49,null as col50,null as col51,null as col52,null as col53,null as col54,null as col55,null as col56,null as col57,null as col58,null as col59,null as col60,null as col61,null as col62,null as col63,null as col64,null as col65,null as col66,null as col67,null as col68,null as col69,null as col70,null as col71,null as col72,null as col73 from performance_schema.events_statements_summary_by_account_by_event_name )
UNION ALL
( SELECT now(6) as ts, @@server_id as server_id,'events_statements_summary_by_host_by_event_name' as table_name,HOST AS col1,EVENT_NAME AS col2,COUNT_STAR AS col3,SUM_TIMER_WAIT AS col4,MIN_TIMER_WAIT AS col5,AVG_TIMER_WAIT AS col6,MAX_TIMER_WAIT AS col7,SUM_LOCK_TIME AS col8,SUM_ERRORS AS col9,SUM_WARNINGS AS col10,SUM_ROWS_AFFECTED AS col11,SUM_ROWS_SENT AS col12,SUM_ROWS_EXAMINED AS col13,SUM_CREATED_TMP_DISK_TABLES AS col14,SUM_CREATED_TMP_TABLES AS col15,SUM_SELECT_FULL_JOIN AS col16,SUM_SELECT_FULL_RANGE_JOIN AS col17,SUM_SELECT_RANGE AS col18,SUM_SELECT_RANGE_CHECK AS col19,SUM_SELECT_SCAN AS col20,SUM_SORT_MERGE_PASSES AS col21,SUM_SORT_RANGE AS col22,SUM_SORT_ROWS AS col23,SUM_SORT_SCAN AS col24,SUM_NO_INDEX_USED AS col25,SUM_NO_GOOD_INDEX_USED AS col26,null as col27,null as col28,null as col29,null as col30,null as col31,null as col32,null as col33,null as col34,null as col35,null as col36,null as col37,null as col38,null as col39,null as col40,null as col41,null as col42,null as col43,null as col44,null as col45,null as col46,null as col47,null as col48,null as col49,null as col50,null as col51,null as col52,null as col53,null as col54,null as col55,null as col56,null as col57,null as col58,null as col59,null as col60,null as col61,null as col62,null as col63,null as col64,null as col65,null as col66,null as col67,null as col68,null as col69,null as col70,null as col71,null as col72,null as col73 from performance_schema.events_statements_summary_by_host_by_event_name )
UNION ALL
( SELECT now(6) as ts, @@server_id as server_id,'events_statements_summary_by_user_by_event_name' as table_name,USER AS col1,EVENT_NAME AS col2,COUNT_STAR AS col3,SUM_TIMER_WAIT AS col4,MIN_TIMER_WAIT AS col5,AVG_TIMER_WAIT AS col6,MAX_TIMER_WAIT AS col7,SUM_LOCK_TIME AS col8,SUM_ERRORS AS col9,SUM_WARNINGS AS col10,SUM_ROWS_AFFECTED AS col11,SUM_ROWS_SENT AS col12,SUM_ROWS_EXAMINED AS col13,SUM_CREATED_TMP_DISK_TABLES AS col14,SUM_CREATED_TMP_TABLES AS col15,SUM_SELECT_FULL_JOIN AS col16,SUM_SELECT_FULL_RANGE_JOIN AS col17,SUM_SELECT_RANGE AS col18,SUM_SELECT_RANGE_CHECK AS col19,SUM_SELECT_SCAN AS col20,SUM_SORT_MERGE_PASSES AS col21,SUM_SORT_RANGE AS col22,SUM_SORT_ROWS AS col23,SUM_SORT_SCAN AS col24,SUM_NO_INDEX_USED AS col25,SUM_NO_GOOD_INDEX_USED AS col26,null as col27,null as col28,null as col29,null as col30,null as col31,null as col32,null as col33,null as col34,null as col35,null as col36,null as col37,null as col38,null as col39,null as col40,null as col41,null as col42,null as col43,null as col44,null as col45,null as col46,null as col47,null as col48,null as col49,null as col50,null as col51,null as col52,null as col53,null as col54,null as col55,null as col56,null as col57,null as col58,null as col59,null as col60,null as col61,null as col62,null as col63,null as col64,null as col65,null as col66,null as col67,null as col68,null as col69,null as col70,null as col71,null as col72,null as col73 from performance_schema.events_statements_summary_by_user_by_event_name )
UNION ALL
( SELECT now(6) as ts, @@server_id as server_id,'events_statements_summary_by_thread_by_event_name' as table_name,THREAD_ID AS col1,EVENT_NAME AS col2,COUNT_STAR AS col3,SUM_TIMER_WAIT AS col4,MIN_TIMER_WAIT AS col5,AVG_TIMER_WAIT AS col6,MAX_TIMER_WAIT AS col7,SUM_LOCK_TIME AS col8,SUM_ERRORS AS col9,SUM_WARNINGS AS col10,SUM_ROWS_AFFECTED AS col11,SUM_ROWS_SENT AS col12,SUM_ROWS_EXAMINED AS col13,SUM_CREATED_TMP_DISK_TABLES AS col14,SUM_CREATED_TMP_TABLES AS col15,SUM_SELECT_FULL_JOIN AS col16,SUM_SELECT_FULL_RANGE_JOIN AS col17,SUM_SELECT_RANGE AS col18,SUM_SELECT_RANGE_CHECK AS col19,SUM_SELECT_SCAN AS col20,SUM_SORT_MERGE_PASSES AS col21,SUM_SORT_RANGE AS col22,SUM_SORT_ROWS AS col23,SUM_SORT_SCAN AS col24,SUM_NO_INDEX_USED AS col25,SUM_NO_GOOD_INDEX_USED AS col26,null as col27,null as col28,null as col29,null as col30,null as col31,null as col32,null as col33,null as col34,null as col35,null as col36,null as col37,null as col38,null as col39,null as col40,null as col41,null as col42,null as col43,null as col44,null as col45,null as col46,null as col47,null as col48,null as col49,null as col50,null as col51,null as col52,null as col53,null as col54,null as col55,null as col56,null as col57,null as col58,null as col59,null as col60,null as col61,null as col62,null as col63,null as col64,null as col65,null as col66,null as col67,null as col68,null as col69,null as col70,null as col71,null as col72,null as col73 from performance_schema.events_statements_summary_by_thread_by_event_name )
UNION ALL
( SELECT now(6) as ts, @@server_id as server_id,'events_statements_summary_global_by_event_name' as table_name,EVENT_NAME AS col1,COUNT_STAR AS col2,SUM_TIMER_WAIT AS col3,MIN_TIMER_WAIT AS col4,AVG_TIMER_WAIT AS col5,MAX_TIMER_WAIT AS col6,SUM_LOCK_TIME AS col7,SUM_ERRORS AS col8,SUM_WARNINGS AS col9,SUM_ROWS_AFFECTED AS col10,SUM_ROWS_SENT AS col11,SUM_ROWS_EXAMINED AS col12,SUM_CREATED_TMP_DISK_TABLES AS col13,SUM_CREATED_TMP_TABLES AS col14,SUM_SELECT_FULL_JOIN AS col15,SUM_SELECT_FULL_RANGE_JOIN AS col16,SUM_SELECT_RANGE AS col17,SUM_SELECT_RANGE_CHECK AS col18,SUM_SELECT_SCAN AS col19,SUM_SORT_MERGE_PASSES AS col20,SUM_SORT_RANGE AS col21,SUM_SORT_ROWS AS col22,SUM_SORT_SCAN AS col23,SUM_NO_INDEX_USED AS col24,SUM_NO_GOOD_INDEX_USED AS col25,null as col26,null as col27,null as col28,null as col29,null as col30,null as col31,null as col32,null as col33,null as col34,null as col35,null as col36,null as col37,null as col38,null as col39,null as col40,null as col41,null as col42,null as col43,null as col44,null as col45,null as col46,null as col47,null as col48,null as col49,null as col50,null as col51,null as col52,null as col53,null as col54,null as col55,null as col56,null as col57,null as col58,null as col59,null as col60,null as col61,null as col62,null as col63,null as col64,null as col65,null as col66,null as col67,null as col68,null as col69,null as col70,null as col71,null as col72,null as col73 from performance_schema.events_statements_summary_global_by_event_name )
UNION ALL
( SELECT now(6) as ts, @@server_id as server_id,'file_summary_by_instance' as table_name,FILE_NAME AS col1,EVENT_NAME AS col2,OBJECT_INSTANCE_BEGIN AS col3,COUNT_STAR AS col4,SUM_TIMER_WAIT AS col5,MIN_TIMER_WAIT AS col6,AVG_TIMER_WAIT AS col7,MAX_TIMER_WAIT AS col8,COUNT_READ AS col9,SUM_TIMER_READ AS col10,MIN_TIMER_READ AS col11,AVG_TIMER_READ AS col12,MAX_TIMER_READ AS col13,SUM_NUMBER_OF_BYTES_READ AS col14,COUNT_WRITE AS col15,SUM_TIMER_WRITE AS col16,MIN_TIMER_WRITE AS col17,AVG_TIMER_WRITE AS col18,MAX_TIMER_WRITE AS col19,SUM_NUMBER_OF_BYTES_WRITE AS col20,COUNT_MISC AS col21,SUM_TIMER_MISC AS col22,MIN_TIMER_MISC AS col23,AVG_TIMER_MISC AS col24,MAX_TIMER_MISC AS col25,null as col26,null as col27,null as col28,null as col29,null as col30,null as col31,null as col32,null as col33,null as col34,null as col35,null as col36,null as col37,null as col38,null as col39,null as col40,null as col41,null as col42,null as col43,null as col44,null as col45,null as col46,null as col47,null as col48,null as col49,null as col50,null as col51,null as col52,null as col53,null as col54,null as col55,null as col56,null as col57,null as col58,null as col59,null as col60,null as col61,null as col62,null as col63,null as col64,null as col65,null as col66,null as col67,null as col68,null as col69,null as col70,null as col71,null as col72,null as col73 from performance_schema.file_summary_by_instance )
UNION ALL
( SELECT now(6) as ts, @@server_id as server_id,'socket_summary_by_instance' as table_name,EVENT_NAME AS col1,OBJECT_INSTANCE_BEGIN AS col2,COUNT_STAR AS col3,SUM_TIMER_WAIT AS col4,MIN_TIMER_WAIT AS col5,AVG_TIMER_WAIT AS col6,MAX_TIMER_WAIT AS col7,COUNT_READ AS col8,SUM_TIMER_READ AS col9,MIN_TIMER_READ AS col10,AVG_TIMER_READ AS col11,MAX_TIMER_READ AS col12,SUM_NUMBER_OF_BYTES_READ AS col13,COUNT_WRITE AS col14,SUM_TIMER_WRITE AS col15,MIN_TIMER_WRITE AS col16,AVG_TIMER_WRITE AS col17,MAX_TIMER_WRITE AS col18,SUM_NUMBER_OF_BYTES_WRITE AS col19,COUNT_MISC AS col20,SUM_TIMER_MISC AS col21,MIN_TIMER_MISC AS col22,AVG_TIMER_MISC AS col23,MAX_TIMER_MISC AS col24,null as col25,null as col26,null as col27,null as col28,null as col29,null as col30,null as col31,null as col32,null as col33,null as col34,null as col35,null as col36,null as col37,null as col38,null as col39,null as col40,null as col41,null as col42,null as col43,null as col44,null as col45,null as col46,null as col47,null as col48,null as col49,null as col50,null as col51,null as col52,null as col53,null as col54,null as col55,null as col56,null as col57,null as col58,null as col59,null as col60,null as col61,null as col62,null as col63,null as col64,null as col65,null as col66,null as col67,null as col68,null as col69,null as col70,null as col71,null as col72,null as col73 from performance_schema.socket_summary_by_instance )
UNION ALL
( SELECT now(6) as ts, @@server_id as server_id,'socket_summary_by_event_name' as table_name,EVENT_NAME AS col1,COUNT_STAR AS col2,SUM_TIMER_WAIT AS col3,MIN_TIMER_WAIT AS col4,AVG_TIMER_WAIT AS col5,MAX_TIMER_WAIT AS col6,COUNT_READ AS col7,SUM_TIMER_READ AS col8,MIN_TIMER_READ AS col9,AVG_TIMER_READ AS col10,MAX_TIMER_READ AS col11,SUM_NUMBER_OF_BYTES_READ AS col12,COUNT_WRITE AS col13,SUM_TIMER_WRITE AS col14,MIN_TIMER_WRITE AS col15,AVG_TIMER_WRITE AS col16,MAX_TIMER_WRITE AS col17,SUM_NUMBER_OF_BYTES_WRITE AS col18,COUNT_MISC AS col19,SUM_TIMER_MISC AS col20,MIN_TIMER_MISC AS col21,AVG_TIMER_MISC AS col22,MAX_TIMER_MISC AS col23,null as col24,null as col25,null as col26,null as col27,null as col28,null as col29,null as col30,null as col31,null as col32,null as col33,null as col34,null as col35,null as col36,null as col37,null as col38,null as col39,null as col40,null as col41,null as col42,null as col43,null as col44,null as col45,null as col46,null as col47,null as col48,null as col49,null as col50,null as col51,null as col52,null as col53,null as col54,null as col55,null as col56,null as col57,null as col58,null as col59,null as col60,null as col61,null as col62,null as col63,null as col64,null as col65,null as col66,null as col67,null as col68,null as col69,null as col70,null as col71,null as col72,null as col73 from performance_schema.socket_summary_by_event_name )
UNION ALL
( SELECT now(6) as ts, @@server_id as server_id,'file_summary_by_event_name' as table_name,EVENT_NAME AS col1,COUNT_STAR AS col2,SUM_TIMER_WAIT AS col3,MIN_TIMER_WAIT AS col4,AVG_TIMER_WAIT AS col5,MAX_TIMER_WAIT AS col6,COUNT_READ AS col7,SUM_TIMER_READ AS col8,MIN_TIMER_READ AS col9,AVG_TIMER_READ AS col10,MAX_TIMER_READ AS col11,SUM_NUMBER_OF_BYTES_READ AS col12,COUNT_WRITE AS col13,SUM_TIMER_WRITE AS col14,MIN_TIMER_WRITE AS col15,AVG_TIMER_WRITE AS col16,MAX_TIMER_WRITE AS col17,SUM_NUMBER_OF_BYTES_WRITE AS col18,COUNT_MISC AS col19,SUM_TIMER_MISC AS col20,MIN_TIMER_MISC AS col21,AVG_TIMER_MISC AS col22,MAX_TIMER_MISC AS col23,null as col24,null as col25,null as col26,null as col27,null as col28,null as col29,null as col30,null as col31,null as col32,null as col33,null as col34,null as col35,null as col36,null as col37,null as col38,null as col39,null as col40,null as col41,null as col42,null as col43,null as col44,null as col45,null as col46,null as col47,null as col48,null as col49,null as col50,null as col51,null as col52,null as col53,null as col54,null as col55,null as col56,null as col57,null as col58,null as col59,null as col60,null as col61,null as col62,null as col63,null as col64,null as col65,null as col66,null as col67,null as col68,null as col69,null as col70,null as col71,null as col72,null as col73 from performance_schema.file_summary_by_event_name )
UNION ALL
( SELECT now(6) as ts, @@server_id as server_id,'events_waits_history_long' as table_name,THREAD_ID AS col1,EVENT_ID AS col2,END_EVENT_ID AS col3,EVENT_NAME AS col4,SOURCE AS col5,TIMER_START AS col6,TIMER_END AS col7,TIMER_WAIT AS col8,SPINS AS col9,OBJECT_SCHEMA AS col10,OBJECT_NAME AS col11,INDEX_NAME AS col12,OBJECT_TYPE AS col13,OBJECT_INSTANCE_BEGIN AS col14,NESTING_EVENT_ID AS col15,NESTING_EVENT_TYPE AS col16,OPERATION AS col17,NUMBER_OF_BYTES AS col18,FLAGS AS col19,null as col20,null as col21,null as col22,null as col23,null as col24,null as col25,null as col26,null as col27,null as col28,null as col29,null as col30,null as col31,null as col32,null as col33,null as col34,null as col35,null as col36,null as col37,null as col38,null as col39,null as col40,null as col41,null as col42,null as col43,null as col44,null as col45,null as col46,null as col47,null as col48,null as col49,null as col50,null as col51,null as col52,null as col53,null as col54,null as col55,null as col56,null as col57,null as col58,null as col59,null as col60,null as col61,null as col62,null as col63,null as col64,null as col65,null as col66,null as col67,null as col68,null as col69,null as col70,null as col71,null as col72,null as col73 from performance_schema.events_waits_history_long )
UNION ALL
( SELECT now(6) as ts, @@server_id as server_id,'events_waits_history' as table_name,THREAD_ID AS col1,EVENT_ID AS col2,END_EVENT_ID AS col3,EVENT_NAME AS col4,SOURCE AS col5,TIMER_START AS col6,TIMER_END AS col7,TIMER_WAIT AS col8,SPINS AS col9,OBJECT_SCHEMA AS col10,OBJECT_NAME AS col11,INDEX_NAME AS col12,OBJECT_TYPE AS col13,OBJECT_INSTANCE_BEGIN AS col14,NESTING_EVENT_ID AS col15,NESTING_EVENT_TYPE AS col16,OPERATION AS col17,NUMBER_OF_BYTES AS col18,FLAGS AS col19,null as col20,null as col21,null as col22,null as col23,null as col24,null as col25,null as col26,null as col27,null as col28,null as col29,null as col30,null as col31,null as col32,null as col33,null as col34,null as col35,null as col36,null as col37,null as col38,null as col39,null as col40,null as col41,null as col42,null as col43,null as col44,null as col45,null as col46,null as col47,null as col48,null as col49,null as col50,null as col51,null as col52,null as col53,null as col54,null as col55,null as col56,null as col57,null as col58,null as col59,null as col60,null as col61,null as col62,null as col63,null as col64,null as col65,null as col66,null as col67,null as col68,null as col69,null as col70,null as col71,null as col72,null as col73 from performance_schema.events_waits_history )
UNION ALL
( SELECT now(6) as ts, @@server_id as server_id,'events_waits_current' as table_name,THREAD_ID AS col1,EVENT_ID AS col2,END_EVENT_ID AS col3,EVENT_NAME AS col4,SOURCE AS col5,TIMER_START AS col6,TIMER_END AS col7,TIMER_WAIT AS col8,SPINS AS col9,OBJECT_SCHEMA AS col10,OBJECT_NAME AS col11,INDEX_NAME AS col12,OBJECT_TYPE AS col13,OBJECT_INSTANCE_BEGIN AS col14,NESTING_EVENT_ID AS col15,NESTING_EVENT_TYPE AS col16,OPERATION AS col17,NUMBER_OF_BYTES AS col18,FLAGS AS col19,null as col20,null as col21,null as col22,null as col23,null as col24,null as col25,null as col26,null as col27,null as col28,null as col29,null as col30,null as col31,null as col32,null as col33,null as col34,null as col35,null as col36,null as col37,null as col38,null as col39,null as col40,null as col41,null as col42,null as col43,null as col44,null as col45,null as col46,null as col47,null as col48,null as col49,null as col50,null as col51,null as col52,null as col53,null as col54,null as col55,null as col56,null as col57,null as col58,null as col59,null as col60,null as col61,null as col62,null as col63,null as col64,null as col65,null as col66,null as col67,null as col68,null as col69,null as col70,null as col71,null as col72,null as col73 from performance_schema.events_waits_current )
UNION ALL
( SELECT now(6) as ts, @@server_id as server_id,'threads' as table_name,THREAD_ID AS col1,NAME AS col2,TYPE AS col3,PROCESSLIST_ID AS col4,PROCESSLIST_USER AS col5,PROCESSLIST_HOST AS col6,PROCESSLIST_DB AS col7,PROCESSLIST_COMMAND AS col8,PROCESSLIST_TIME AS col9,PROCESSLIST_STATE AS col10,PROCESSLIST_INFO AS col11,PARENT_THREAD_ID AS col12,ROLE AS col13,INSTRUMENTED AS col14,null as col15,null as col16,null as col17,null as col18,null as col19,null as col20,null as col21,null as col22,null as col23,null as col24,null as col25,null as col26,null as col27,null as col28,null as col29,null as col30,null as col31,null as col32,null as col33,null as col34,null as col35,null as col36,null as col37,null as col38,null as col39,null as col40,null as col41,null as col42,null as col43,null as col44,null as col45,null as col46,null as col47,null as col48,null as col49,null as col50,null as col51,null as col52,null as col53,null as col54,null as col55,null as col56,null as col57,null as col58,null as col59,null as col60,null as col61,null as col62,null as col63,null as col64,null as col65,null as col66,null as col67,null as col68,null as col69,null as col70,null as col71,null as col72,null as col73 from performance_schema.threads )
UNION ALL
( SELECT now(6) as ts, @@server_id as server_id,'events_stages_current' as table_name,THREAD_ID AS col1,EVENT_ID AS col2,END_EVENT_ID AS col3,EVENT_NAME AS col4,SOURCE AS col5,TIMER_START AS col6,TIMER_END AS col7,TIMER_WAIT AS col8,NESTING_EVENT_ID AS col9,NESTING_EVENT_TYPE AS col10,null as col11,null as col12,null as col13,null as col14,null as col15,null as col16,null as col17,null as col18,null as col19,null as col20,null as col21,null as col22,null as col23,null as col24,null as col25,null as col26,null as col27,null as col28,null as col29,null as col30,null as col31,null as col32,null as col33,null as col34,null as col35,null as col36,null as col37,null as col38,null as col39,null as col40,null as col41,null as col42,null as col43,null as col44,null as col45,null as col46,null as col47,null as col48,null as col49,null as col50,null as col51,null as col52,null as col53,null as col54,null as col55,null as col56,null as col57,null as col58,null as col59,null as col60,null as col61,null as col62,null as col63,null as col64,null as col65,null as col66,null as col67,null as col68,null as col69,null as col70,null as col71,null as col72,null as col73 from performance_schema.events_stages_current )
UNION ALL
( SELECT now(6) as ts, @@server_id as server_id,'events_stages_history_long' as table_name,THREAD_ID AS col1,EVENT_ID AS col2,END_EVENT_ID AS col3,EVENT_NAME AS col4,SOURCE AS col5,TIMER_START AS col6,TIMER_END AS col7,TIMER_WAIT AS col8,NESTING_EVENT_ID AS col9,NESTING_EVENT_TYPE AS col10,null as col11,null as col12,null as col13,null as col14,null as col15,null as col16,null as col17,null as col18,null as col19,null as col20,null as col21,null as col22,null as col23,null as col24,null as col25,null as col26,null as col27,null as col28,null as col29,null as col30,null as col31,null as col32,null as col33,null as col34,null as col35,null as col36,null as col37,null as col38,null as col39,null as col40,null as col41,null as col42,null as col43,null as col44,null as col45,null as col46,null as col47,null as col48,null as col49,null as col50,null as col51,null as col52,null as col53,null as col54,null as col55,null as col56,null as col57,null as col58,null as col59,null as col60,null as col61,null as col62,null as col63,null as col64,null as col65,null as col66,null as col67,null as col68,null as col69,null as col70,null as col71,null as col72,null as col73 from performance_schema.events_stages_history_long )
UNION ALL
( SELECT now(6) as ts, @@server_id as server_id,'events_stages_history' as table_name,THREAD_ID AS col1,EVENT_ID AS col2,END_EVENT_ID AS col3,EVENT_NAME AS col4,SOURCE AS col5,TIMER_START AS col6,TIMER_END AS col7,TIMER_WAIT AS col8,NESTING_EVENT_ID AS col9,NESTING_EVENT_TYPE AS col10,null as col11,null as col12,null as col13,null as col14,null as col15,null as col16,null as col17,null as col18,null as col19,null as col20,null as col21,null as col22,null as col23,null as col24,null as col25,null as col26,null as col27,null as col28,null as col29,null as col30,null as col31,null as col32,null as col33,null as col34,null as col35,null as col36,null as col37,null as col38,null as col39,null as col40,null as col41,null as col42,null as col43,null as col44,null as col45,null as col46,null as col47,null as col48,null as col49,null as col50,null as col51,null as col52,null as col53,null as col54,null as col55,null as col56,null as col57,null as col58,null as col59,null as col60,null as col61,null as col62,null as col63,null as col64,null as col65,null as col66,null as col67,null as col68,null as col69,null as col70,null as col71,null as col72,null as col73 from performance_schema.events_stages_history )
UNION ALL
( SELECT now(6) as ts, @@server_id as server_id,'events_waits_summary_by_account_by_event_name' as table_name,USER AS col1,HOST AS col2,EVENT_NAME AS col3,COUNT_STAR AS col4,SUM_TIMER_WAIT AS col5,MIN_TIMER_WAIT AS col6,AVG_TIMER_WAIT AS col7,MAX_TIMER_WAIT AS col8,null as col9,null as col10,null as col11,null as col12,null as col13,null as col14,null as col15,null as col16,null as col17,null as col18,null as col19,null as col20,null as col21,null as col22,null as col23,null as col24,null as col25,null as col26,null as col27,null as col28,null as col29,null as col30,null as col31,null as col32,null as col33,null as col34,null as col35,null as col36,null as col37,null as col38,null as col39,null as col40,null as col41,null as col42,null as col43,null as col44,null as col45,null as col46,null as col47,null as col48,null as col49,null as col50,null as col51,null as col52,null as col53,null as col54,null as col55,null as col56,null as col57,null as col58,null as col59,null as col60,null as col61,null as col62,null as col63,null as col64,null as col65,null as col66,null as col67,null as col68,null as col69,null as col70,null as col71,null as col72,null as col73 from performance_schema.events_waits_summary_by_account_by_event_name )
UNION ALL
( SELECT now(6) as ts, @@server_id as server_id,'objects_summary_global_by_type' as table_name,OBJECT_TYPE AS col1,OBJECT_SCHEMA AS col2,OBJECT_NAME AS col3,COUNT_STAR AS col4,SUM_TIMER_WAIT AS col5,MIN_TIMER_WAIT AS col6,AVG_TIMER_WAIT AS col7,MAX_TIMER_WAIT AS col8,null as col9,null as col10,null as col11,null as col12,null as col13,null as col14,null as col15,null as col16,null as col17,null as col18,null as col19,null as col20,null as col21,null as col22,null as col23,null as col24,null as col25,null as col26,null as col27,null as col28,null as col29,null as col30,null as col31,null as col32,null as col33,null as col34,null as col35,null as col36,null as col37,null as col38,null as col39,null as col40,null as col41,null as col42,null as col43,null as col44,null as col45,null as col46,null as col47,null as col48,null as col49,null as col50,null as col51,null as col52,null as col53,null as col54,null as col55,null as col56,null as col57,null as col58,null as col59,null as col60,null as col61,null as col62,null as col63,null as col64,null as col65,null as col66,null as col67,null as col68,null as col69,null as col70,null as col71,null as col72,null as col73 from performance_schema.objects_summary_global_by_type )
UNION ALL
( SELECT now(6) as ts, @@server_id as server_id,'events_stages_summary_by_account_by_event_name' as table_name,USER AS col1,HOST AS col2,EVENT_NAME AS col3,COUNT_STAR AS col4,SUM_TIMER_WAIT AS col5,MIN_TIMER_WAIT AS col6,AVG_TIMER_WAIT AS col7,MAX_TIMER_WAIT AS col8,null as col9,null as col10,null as col11,null as col12,null as col13,null as col14,null as col15,null as col16,null as col17,null as col18,null as col19,null as col20,null as col21,null as col22,null as col23,null as col24,null as col25,null as col26,null as col27,null as col28,null as col29,null as col30,null as col31,null as col32,null as col33,null as col34,null as col35,null as col36,null as col37,null as col38,null as col39,null as col40,null as col41,null as col42,null as col43,null as col44,null as col45,null as col46,null as col47,null as col48,null as col49,null as col50,null as col51,null as col52,null as col53,null as col54,null as col55,null as col56,null as col57,null as col58,null as col59,null as col60,null as col61,null as col62,null as col63,null as col64,null as col65,null as col66,null as col67,null as col68,null as col69,null as col70,null as col71,null as col72,null as col73 from performance_schema.events_stages_summary_by_account_by_event_name )
UNION ALL
( SELECT now(6) as ts, @@server_id as server_id,'events_stages_summary_by_user_by_event_name' as table_name,USER AS col1,EVENT_NAME AS col2,COUNT_STAR AS col3,SUM_TIMER_WAIT AS col4,MIN_TIMER_WAIT AS col5,AVG_TIMER_WAIT AS col6,MAX_TIMER_WAIT AS col7,null as col8,null as col9,null as col10,null as col11,null as col12,null as col13,null as col14,null as col15,null as col16,null as col17,null as col18,null as col19,null as col20,null as col21,null as col22,null as col23,null as col24,null as col25,null as col26,null as col27,null as col28,null as col29,null as col30,null as col31,null as col32,null as col33,null as col34,null as col35,null as col36,null as col37,null as col38,null as col39,null as col40,null as col41,null as col42,null as col43,null as col44,null as col45,null as col46,null as col47,null as col48,null as col49,null as col50,null as col51,null as col52,null as col53,null as col54,null as col55,null as col56,null as col57,null as col58,null as col59,null as col60,null as col61,null as col62,null as col63,null as col64,null as col65,null as col66,null as col67,null as col68,null as col69,null as col70,null as col71,null as col72,null as col73 from performance_schema.events_stages_summary_by_user_by_event_name )
UNION ALL
( SELECT now(6) as ts, @@server_id as server_id,'events_stages_summary_by_thread_by_event_name' as table_name,THREAD_ID AS col1,EVENT_NAME AS col2,COUNT_STAR AS col3,SUM_TIMER_WAIT AS col4,MIN_TIMER_WAIT AS col5,AVG_TIMER_WAIT AS col6,MAX_TIMER_WAIT AS col7,null as col8,null as col9,null as col10,null as col11,null as col12,null as col13,null as col14,null as col15,null as col16,null as col17,null as col18,null as col19,null as col20,null as col21,null as col22,null as col23,null as col24,null as col25,null as col26,null as col27,null as col28,null as col29,null as col30,null as col31,null as col32,null as col33,null as col34,null as col35,null as col36,null as col37,null as col38,null as col39,null as col40,null as col41,null as col42,null as col43,null as col44,null as col45,null as col46,null as col47,null as col48,null as col49,null as col50,null as col51,null as col52,null as col53,null as col54,null as col55,null as col56,null as col57,null as col58,null as col59,null as col60,null as col61,null as col62,null as col63,null as col64,null as col65,null as col66,null as col67,null as col68,null as col69,null as col70,null as col71,null as col72,null as col73 from performance_schema.events_stages_summary_by_thread_by_event_name )
UNION ALL
( SELECT now(6) as ts, @@server_id as server_id,'socket_instances' as table_name,EVENT_NAME AS col1,OBJECT_INSTANCE_BEGIN AS col2,THREAD_ID AS col3,SOCKET_ID AS col4,IP AS col5,PORT AS col6,STATE AS col7,null as col8,null as col9,null as col10,null as col11,null as col12,null as col13,null as col14,null as col15,null as col16,null as col17,null as col18,null as col19,null as col20,null as col21,null as col22,null as col23,null as col24,null as col25,null as col26,null as col27,null as col28,null as col29,null as col30,null as col31,null as col32,null as col33,null as col34,null as col35,null as col36,null as col37,null as col38,null as col39,null as col40,null as col41,null as col42,null as col43,null as col44,null as col45,null as col46,null as col47,null as col48,null as col49,null as col50,null as col51,null as col52,null as col53,null as col54,null as col55,null as col56,null as col57,null as col58,null as col59,null as col60,null as col61,null as col62,null as col63,null as col64,null as col65,null as col66,null as col67,null as col68,null as col69,null as col70,null as col71,null as col72,null as col73 from performance_schema.socket_instances )
UNION ALL
( SELECT now(6) as ts, @@server_id as server_id,'events_waits_summary_by_user_by_event_name' as table_name,USER AS col1,EVENT_NAME AS col2,COUNT_STAR AS col3,SUM_TIMER_WAIT AS col4,MIN_TIMER_WAIT AS col5,AVG_TIMER_WAIT AS col6,MAX_TIMER_WAIT AS col7,null as col8,null as col9,null as col10,null as col11,null as col12,null as col13,null as col14,null as col15,null as col16,null as col17,null as col18,null as col19,null as col20,null as col21,null as col22,null as col23,null as col24,null as col25,null as col26,null as col27,null as col28,null as col29,null as col30,null as col31,null as col32,null as col33,null as col34,null as col35,null as col36,null as col37,null as col38,null as col39,null as col40,null as col41,null as col42,null as col43,null as col44,null as col45,null as col46,null as col47,null as col48,null as col49,null as col50,null as col51,null as col52,null as col53,null as col54,null as col55,null as col56,null as col57,null as col58,null as col59,null as col60,null as col61,null as col62,null as col63,null as col64,null as col65,null as col66,null as col67,null as col68,null as col69,null as col70,null as col71,null as col72,null as col73 from performance_schema.events_waits_summary_by_user_by_event_name )
UNION ALL
( SELECT now(6) as ts, @@server_id as server_id,'events_stages_summary_by_host_by_event_name' as table_name,HOST AS col1,EVENT_NAME AS col2,COUNT_STAR AS col3,SUM_TIMER_WAIT AS col4,MIN_TIMER_WAIT AS col5,AVG_TIMER_WAIT AS col6,MAX_TIMER_WAIT AS col7,null as col8,null as col9,null as col10,null as col11,null as col12,null as col13,null as col14,null as col15,null as col16,null as col17,null as col18,null as col19,null as col20,null as col21,null as col22,null as col23,null as col24,null as col25,null as col26,null as col27,null as col28,null as col29,null as col30,null as col31,null as col32,null as col33,null as col34,null as col35,null as col36,null as col37,null as col38,null as col39,null as col40,null as col41,null as col42,null as col43,null as col44,null as col45,null as col46,null as col47,null as col48,null as col49,null as col50,null as col51,null as col52,null as col53,null as col54,null as col55,null as col56,null as col57,null as col58,null as col59,null as col60,null as col61,null as col62,null as col63,null as col64,null as col65,null as col66,null as col67,null as col68,null as col69,null as col70,null as col71,null as col72,null as col73 from performance_schema.events_stages_summary_by_host_by_event_name )
UNION ALL
( SELECT now(6) as ts, @@server_id as server_id,'events_waits_summary_by_thread_by_event_name' as table_name,THREAD_ID AS col1,EVENT_NAME AS col2,COUNT_STAR AS col3,SUM_TIMER_WAIT AS col4,MIN_TIMER_WAIT AS col5,AVG_TIMER_WAIT AS col6,MAX_TIMER_WAIT AS col7,null as col8,null as col9,null as col10,null as col11,null as col12,null as col13,null as col14,null as col15,null as col16,null as col17,null as col18,null as col19,null as col20,null as col21,null as col22,null as col23,null as col24,null as col25,null as col26,null as col27,null as col28,null as col29,null as col30,null as col31,null as col32,null as col33,null as col34,null as col35,null as col36,null as col37,null as col38,null as col39,null as col40,null as col41,null as col42,null as col43,null as col44,null as col45,null as col46,null as col47,null as col48,null as col49,null as col50,null as col51,null as col52,null as col53,null as col54,null as col55,null as col56,null as col57,null as col58,null as col59,null as col60,null as col61,null as col62,null as col63,null as col64,null as col65,null as col66,null as col67,null as col68,null as col69,null as col70,null as col71,null as col72,null as col73 from performance_schema.events_waits_summary_by_thread_by_event_name )
UNION ALL
( SELECT now(6) as ts, @@server_id as server_id,'events_waits_summary_by_instance' as table_name,EVENT_NAME AS col1,OBJECT_INSTANCE_BEGIN AS col2,COUNT_STAR AS col3,SUM_TIMER_WAIT AS col4,MIN_TIMER_WAIT AS col5,AVG_TIMER_WAIT AS col6,MAX_TIMER_WAIT AS col7,null as col8,null as col9,null as col10,null as col11,null as col12,null as col13,null as col14,null as col15,null as col16,null as col17,null as col18,null as col19,null as col20,null as col21,null as col22,null as col23,null as col24,null as col25,null as col26,null as col27,null as col28,null as col29,null as col30,null as col31,null as col32,null as col33,null as col34,null as col35,null as col36,null as col37,null as col38,null as col39,null as col40,null as col41,null as col42,null as col43,null as col44,null as col45,null as col46,null as col47,null as col48,null as col49,null as col50,null as col51,null as col52,null as col53,null as col54,null as col55,null as col56,null as col57,null as col58,null as col59,null as col60,null as col61,null as col62,null as col63,null as col64,null as col65,null as col66,null as col67,null as col68,null as col69,null as col70,null as col71,null as col72,null as col73 from performance_schema.events_waits_summary_by_instance )
UNION ALL
( SELECT now(6) as ts, @@server_id as server_id,'events_waits_summary_by_host_by_event_name' as table_name,HOST AS col1,EVENT_NAME AS col2,COUNT_STAR AS col3,SUM_TIMER_WAIT AS col4,MIN_TIMER_WAIT AS col5,AVG_TIMER_WAIT AS col6,MAX_TIMER_WAIT AS col7,null as col8,null as col9,null as col10,null as col11,null as col12,null as col13,null as col14,null as col15,null as col16,null as col17,null as col18,null as col19,null as col20,null as col21,null as col22,null as col23,null as col24,null as col25,null as col26,null as col27,null as col28,null as col29,null as col30,null as col31,null as col32,null as col33,null as col34,null as col35,null as col36,null as col37,null as col38,null as col39,null as col40,null as col41,null as col42,null as col43,null as col44,null as col45,null as col46,null as col47,null as col48,null as col49,null as col50,null as col51,null as col52,null as col53,null as col54,null as col55,null as col56,null as col57,null as col58,null as col59,null as col60,null as col61,null as col62,null as col63,null as col64,null as col65,null as col66,null as col67,null as col68,null as col69,null as col70,null as col71,null as col72,null as col73 from performance_schema.events_waits_summary_by_host_by_event_name )
UNION ALL
( SELECT now(6) as ts, @@server_id as server_id,'events_stages_summary_global_by_event_name' as table_name,EVENT_NAME AS col1,COUNT_STAR AS col2,SUM_TIMER_WAIT AS col3,MIN_TIMER_WAIT AS col4,AVG_TIMER_WAIT AS col5,MAX_TIMER_WAIT AS col6,null as col7,null as col8,null as col9,null as col10,null as col11,null as col12,null as col13,null as col14,null as col15,null as col16,null as col17,null as col18,null as col19,null as col20,null as col21,null as col22,null as col23,null as col24,null as col25,null as col26,null as col27,null as col28,null as col29,null as col30,null as col31,null as col32,null as col33,null as col34,null as col35,null as col36,null as col37,null as col38,null as col39,null as col40,null as col41,null as col42,null as col43,null as col44,null as col45,null as col46,null as col47,null as col48,null as col49,null as col50,null as col51,null as col52,null as col53,null as col54,null as col55,null as col56,null as col57,null as col58,null as col59,null as col60,null as col61,null as col62,null as col63,null as col64,null as col65,null as col66,null as col67,null as col68,null as col69,null as col70,null as col71,null as col72,null as col73 from performance_schema.events_stages_summary_global_by_event_name )
UNION ALL
( SELECT now(6) as ts, @@server_id as server_id,'events_waits_summary_global_by_event_name' as table_name,EVENT_NAME AS col1,COUNT_STAR AS col2,SUM_TIMER_WAIT AS col3,MIN_TIMER_WAIT AS col4,AVG_TIMER_WAIT AS col5,MAX_TIMER_WAIT AS col6,null as col7,null as col8,null as col9,null as col10,null as col11,null as col12,null as col13,null as col14,null as col15,null as col16,null as col17,null as col18,null as col19,null as col20,null as col21,null as col22,null as col23,null as col24,null as col25,null as col26,null as col27,null as col28,null as col29,null as col30,null as col31,null as col32,null as col33,null as col34,null as col35,null as col36,null as col37,null as col38,null as col39,null as col40,null as col41,null as col42,null as col43,null as col44,null as col45,null as col46,null as col47,null as col48,null as col49,null as col50,null as col51,null as col52,null as col53,null as col54,null as col55,null as col56,null as col57,null as col58,null as col59,null as col60,null as col61,null as col62,null as col63,null as col64,null as col65,null as col66,null as col67,null as col68,null as col69,null as col70,null as col71,null as col72,null as col73 from performance_schema.events_waits_summary_global_by_event_name )
UNION ALL
( SELECT now(6) as ts, @@server_id as server_id,'accounts' as table_name,USER AS col1,HOST AS col2,CURRENT_CONNECTIONS AS col3,TOTAL_CONNECTIONS AS col4,null as col5,null as col6,null as col7,null as col8,null as col9,null as col10,null as col11,null as col12,null as col13,null as col14,null as col15,null as col16,null as col17,null as col18,null as col19,null as col20,null as col21,null as col22,null as col23,null as col24,null as col25,null as col26,null as col27,null as col28,null as col29,null as col30,null as col31,null as col32,null as col33,null as col34,null as col35,null as col36,null as col37,null as col38,null as col39,null as col40,null as col41,null as col42,null as col43,null as col44,null as col45,null as col46,null as col47,null as col48,null as col49,null as col50,null as col51,null as col52,null as col53,null as col54,null as col55,null as col56,null as col57,null as col58,null as col59,null as col60,null as col61,null as col62,null as col63,null as col64,null as col65,null as col66,null as col67,null as col68,null as col69,null as col70,null as col71,null as col72,null as col73 from performance_schema.accounts )
UNION ALL
( SELECT now(6) as ts, @@server_id as server_id,'session_connect_attrs' as table_name,PROCESSLIST_ID AS col1,ATTR_NAME AS col2,ATTR_VALUE AS col3,ORDINAL_POSITION AS col4,null as col5,null as col6,null as col7,null as col8,null as col9,null as col10,null as col11,null as col12,null as col13,null as col14,null as col15,null as col16,null as col17,null as col18,null as col19,null as col20,null as col21,null as col22,null as col23,null as col24,null as col25,null as col26,null as col27,null as col28,null as col29,null as col30,null as col31,null as col32,null as col33,null as col34,null as col35,null as col36,null as col37,null as col38,null as col39,null as col40,null as col41,null as col42,null as col43,null as col44,null as col45,null as col46,null as col47,null as col48,null as col49,null as col50,null as col51,null as col52,null as col53,null as col54,null as col55,null as col56,null as col57,null as col58,null as col59,null as col60,null as col61,null as col62,null as col63,null as col64,null as col65,null as col66,null as col67,null as col68,null as col69,null as col70,null as col71,null as col72,null as col73 from performance_schema.session_connect_attrs )
UNION ALL
( SELECT now(6) as ts, @@server_id as server_id,'session_account_connect_attrs' as table_name,PROCESSLIST_ID AS col1,ATTR_NAME AS col2,ATTR_VALUE AS col3,ORDINAL_POSITION AS col4,null as col5,null as col6,null as col7,null as col8,null as col9,null as col10,null as col11,null as col12,null as col13,null as col14,null as col15,null as col16,null as col17,null as col18,null as col19,null as col20,null as col21,null as col22,null as col23,null as col24,null as col25,null as col26,null as col27,null as col28,null as col29,null as col30,null as col31,null as col32,null as col33,null as col34,null as col35,null as col36,null as col37,null as col38,null as col39,null as col40,null as col41,null as col42,null as col43,null as col44,null as col45,null as col46,null as col47,null as col48,null as col49,null as col50,null as col51,null as col52,null as col53,null as col54,null as col55,null as col56,null as col57,null as col58,null as col59,null as col60,null as col61,null as col62,null as col63,null as col64,null as col65,null as col66,null as col67,null as col68,null as col69,null as col70,null as col71,null as col72,null as col73 from performance_schema.session_account_connect_attrs )
UNION ALL
( SELECT now(6) as ts, @@server_id as server_id,'rwlock_instances' as table_name,NAME AS col1,OBJECT_INSTANCE_BEGIN AS col2,WRITE_LOCKED_BY_THREAD_ID AS col3,READ_LOCKED_BY_COUNT AS col4,null as col5,null as col6,null as col7,null as col8,null as col9,null as col10,null as col11,null as col12,null as col13,null as col14,null as col15,null as col16,null as col17,null as col18,null as col19,null as col20,null as col21,null as col22,null as col23,null as col24,null as col25,null as col26,null as col27,null as col28,null as col29,null as col30,null as col31,null as col32,null as col33,null as col34,null as col35,null as col36,null as col37,null as col38,null as col39,null as col40,null as col41,null as col42,null as col43,null as col44,null as col45,null as col46,null as col47,null as col48,null as col49,null as col50,null as col51,null as col52,null as col53,null as col54,null as col55,null as col56,null as col57,null as col58,null as col59,null as col60,null as col61,null as col62,null as col63,null as col64,null as col65,null as col66,null as col67,null as col68,null as col69,null as col70,null as col71,null as col72,null as col73 from performance_schema.rwlock_instances )
UNION ALL
( SELECT now(6) as ts, @@server_id as server_id,'performance_timers' as table_name,TIMER_NAME AS col1,TIMER_FREQUENCY AS col2,TIMER_RESOLUTION AS col3,TIMER_OVERHEAD AS col4,null as col5,null as col6,null as col7,null as col8,null as col9,null as col10,null as col11,null as col12,null as col13,null as col14,null as col15,null as col16,null as col17,null as col18,null as col19,null as col20,null as col21,null as col22,null as col23,null as col24,null as col25,null as col26,null as col27,null as col28,null as col29,null as col30,null as col31,null as col32,null as col33,null as col34,null as col35,null as col36,null as col37,null as col38,null as col39,null as col40,null as col41,null as col42,null as col43,null as col44,null as col45,null as col46,null as col47,null as col48,null as col49,null as col50,null as col51,null as col52,null as col53,null as col54,null as col55,null as col56,null as col57,null as col58,null as col59,null as col60,null as col61,null as col62,null as col63,null as col64,null as col65,null as col66,null as col67,null as col68,null as col69,null as col70,null as col71,null as col72,null as col73 from performance_schema.performance_timers )
UNION ALL
( SELECT now(6) as ts, @@server_id as server_id,'file_instances' as table_name,FILE_NAME AS col1,EVENT_NAME AS col2,OPEN_COUNT AS col3,null as col4,null as col5,null as col6,null as col7,null as col8,null as col9,null as col10,null as col11,null as col12,null as col13,null as col14,null as col15,null as col16,null as col17,null as col18,null as col19,null as col20,null as col21,null as col22,null as col23,null as col24,null as col25,null as col26,null as col27,null as col28,null as col29,null as col30,null as col31,null as col32,null as col33,null as col34,null as col35,null as col36,null as col37,null as col38,null as col39,null as col40,null as col41,null as col42,null as col43,null as col44,null as col45,null as col46,null as col47,null as col48,null as col49,null as col50,null as col51,null as col52,null as col53,null as col54,null as col55,null as col56,null as col57,null as col58,null as col59,null as col60,null as col61,null as col62,null as col63,null as col64,null as col65,null as col66,null as col67,null as col68,null as col69,null as col70,null as col71,null as col72,null as col73 from performance_schema.file_instances )
UNION ALL
( SELECT now(6) as ts, @@server_id as server_id,'users' as table_name,USER AS col1,CURRENT_CONNECTIONS AS col2,TOTAL_CONNECTIONS AS col3,null as col4,null as col5,null as col6,null as col7,null as col8,null as col9,null as col10,null as col11,null as col12,null as col13,null as col14,null as col15,null as col16,null as col17,null as col18,null as col19,null as col20,null as col21,null as col22,null as col23,null as col24,null as col25,null as col26,null as col27,null as col28,null as col29,null as col30,null as col31,null as col32,null as col33,null as col34,null as col35,null as col36,null as col37,null as col38,null as col39,null as col40,null as col41,null as col42,null as col43,null as col44,null as col45,null as col46,null as col47,null as col48,null as col49,null as col50,null as col51,null as col52,null as col53,null as col54,null as col55,null as col56,null as col57,null as col58,null as col59,null as col60,null as col61,null as col62,null as col63,null as col64,null as col65,null as col66,null as col67,null as col68,null as col69,null as col70,null as col71,null as col72,null as col73 from performance_schema.users )
UNION ALL
( SELECT now(6) as ts, @@server_id as server_id,'mutex_instances' as table_name,NAME AS col1,OBJECT_INSTANCE_BEGIN AS col2,LOCKED_BY_THREAD_ID AS col3,null as col4,null as col5,null as col6,null as col7,null as col8,null as col9,null as col10,null as col11,null as col12,null as col13,null as col14,null as col15,null as col16,null as col17,null as col18,null as col19,null as col20,null as col21,null as col22,null as col23,null as col24,null as col25,null as col26,null as col27,null as col28,null as col29,null as col30,null as col31,null as col32,null as col33,null as col34,null as col35,null as col36,null as col37,null as col38,null as col39,null as col40,null as col41,null as col42,null as col43,null as col44,null as col45,null as col46,null as col47,null as col48,null as col49,null as col50,null as col51,null as col52,null as col53,null as col54,null as col55,null as col56,null as col57,null as col58,null as col59,null as col60,null as col61,null as col62,null as col63,null as col64,null as col65,null as col66,null as col67,null as col68,null as col69,null as col70,null as col71,null as col72,null as col73 from performance_schema.mutex_instances )
UNION ALL
( SELECT now(6) as ts, @@server_id as server_id,'hosts' as table_name,HOST AS col1,CURRENT_CONNECTIONS AS col2,TOTAL_CONNECTIONS AS col3,null as col4,null as col5,null as col6,null as col7,null as col8,null as col9,null as col10,null as col11,null as col12,null as col13,null as col14,null as col15,null as col16,null as col17,null as col18,null as col19,null as col20,null as col21,null as col22,null as col23,null as col24,null as col25,null as col26,null as col27,null as col28,null as col29,null as col30,null as col31,null as col32,null as col33,null as col34,null as col35,null as col36,null as col37,null as col38,null as col39,null as col40,null as col41,null as col42,null as col43,null as col44,null as col45,null as col46,null as col47,null as col48,null as col49,null as col50,null as col51,null as col52,null as col53,null as col54,null as col55,null as col56,null as col57,null as col58,null as col59,null as col60,null as col61,null as col62,null as col63,null as col64,null as col65,null as col66,null as col67,null as col68,null as col69,null as col70,null as col71,null as col72,null as col73 from performance_schema.hosts )
UNION ALL
( SELECT now(6) as ts, @@server_id as server_id,'cond_instances' as table_name,NAME AS col1,OBJECT_INSTANCE_BEGIN AS col2,null as col3,null as col4,null as col5,null as col6,null as col7,null as col8,null as col9,null as col10,null as col11,null as col12,null as col13,null as col14,null as col15,null as col16,null as col17,null as col18,null as col19,null as col20,null as col21,null as col22,null as col23,null as col24,null as col25,null as col26,null as col27,null as col28,null as col29,null as col30,null as col31,null as col32,null as col33,null as col34,null as col35,null as col36,null as col37,null as col38,null as col39,null as col40,null as col41,null as col42,null as col43,null as col44,null as col45,null as col46,null as col47,null as col48,null as col49,null as col50,null as col51,null as col52,null as col53,null as col54,null as col55,null as col56,null as col57,null as col58,null as col59,null as col60,null as col61,null as col62,null as col63,null as col64,null as col65,null as col66,null as col67,null as col68,null as col69,null as col70,null as col71,null as col72,null as col73 from performance_schema.cond_instances );
    INSERT INTO psmv.table_lock_waits_summary_by_table SELECT ts, server_id, col1, col2, col3, col4, col5, col6, col7, col8, col9, col10, col11, col12, col13, col14, col15, col16, col17, col18, col19, col20, col21, col22, col23, col24, col25, col26, col27, col28, col29, col30, col31, col32, col33, col34, col35, col36, col37, col38, col39, col40, col41, col42, col43, col44, col45, col46, col47, col48, col49, col50, col51, col52, col53, col54, col55, col56, col57, col58, col59, col60, col61, col62, col63, col64, col65, col66, col67, col68, col69, col70, col71, col72, col73 FROM psmv.snapshot where table_name = 'table_lock_waits_summary_by_table';
    INSERT INTO psmv.events_statements_history_long SELECT ts, server_id, col1, col2, col3, col4, col5, col6, col7, col8, col9, col10, col11, col12, col13, col14, col15, col16, col17, col18, col19, col20, col21, col22, col23, col24, col25, col26, col27, col28, col29, col30, col31, col32, col33, col34, col35, col36, col37, col38, col39, col40 FROM psmv.snapshot where table_name = 'events_statements_history_long';
    INSERT INTO psmv.events_statements_history SELECT ts, server_id, col1, col2, col3, col4, col5, col6, col7, col8, col9, col10, col11, col12, col13, col14, col15, col16, col17, col18, col19, col20, col21, col22, col23, col24, col25, col26, col27, col28, col29, col30, col31, col32, col33, col34, col35, col36, col37, col38, col39, col40 FROM psmv.snapshot where table_name = 'events_statements_history';
    INSERT INTO psmv.events_statements_current SELECT ts, server_id, col1, col2, col3, col4, col5, col6, col7, col8, col9, col10, col11, col12, col13, col14, col15, col16, col17, col18, col19, col20, col21, col22, col23, col24, col25, col26, col27, col28, col29, col30, col31, col32, col33, col34, col35, col36, col37, col38, col39, col40 FROM psmv.snapshot where table_name = 'events_statements_current';
    INSERT INTO psmv.table_io_waits_summary_by_index_usage SELECT ts, server_id, col1, col2, col3, col4, col5, col6, col7, col8, col9, col10, col11, col12, col13, col14, col15, col16, col17, col18, col19, col20, col21, col22, col23, col24, col25, col26, col27, col28, col29, col30, col31, col32, col33, col34, col35, col36, col37, col38, col39 FROM psmv.snapshot where table_name = 'table_io_waits_summary_by_index_usage';
    INSERT INTO psmv.table_io_waits_summary_by_table SELECT ts, server_id, col1, col2, col3, col4, col5, col6, col7, col8, col9, col10, col11, col12, col13, col14, col15, col16, col17, col18, col19, col20, col21, col22, col23, col24, col25, col26, col27, col28, col29, col30, col31, col32, col33, col34, col35, col36, col37, col38 FROM psmv.snapshot where table_name = 'table_io_waits_summary_by_table';
    INSERT INTO psmv.events_statements_summary_by_digest SELECT ts, server_id, col1, col2, col3, col4, col5, col6, col7, col8, col9, col10, col11, col12, col13, col14, col15, col16, col17, col18, col19, col20, col21, col22, col23, col24, col25, col26, col27, col28, col29 FROM psmv.snapshot where table_name = 'events_statements_summary_by_digest';
    INSERT INTO psmv.host_cache SELECT ts, server_id, col1, col2, col3, col4, col5, col6, col7, col8, col9, col10, col11, col12, col13, col14, col15, col16, col17, col18, col19, col20, col21, col22, col23, col24, col25, col26, col27, col28, col29 FROM psmv.snapshot where table_name = 'host_cache';
    INSERT INTO psmv.events_statements_summary_by_account_by_event_name SELECT ts, server_id, col1, col2, col3, col4, col5, col6, col7, col8, col9, col10, col11, col12, col13, col14, col15, col16, col17, col18, col19, col20, col21, col22, col23, col24, col25, col26, col27 FROM psmv.snapshot where table_name = 'events_statements_summary_by_account_by_event_name';
    INSERT INTO psmv.events_statements_summary_by_host_by_event_name SELECT ts, server_id, col1, col2, col3, col4, col5, col6, col7, col8, col9, col10, col11, col12, col13, col14, col15, col16, col17, col18, col19, col20, col21, col22, col23, col24, col25, col26 FROM psmv.snapshot where table_name = 'events_statements_summary_by_host_by_event_name';
    INSERT INTO psmv.events_statements_summary_by_user_by_event_name SELECT ts, server_id, col1, col2, col3, col4, col5, col6, col7, col8, col9, col10, col11, col12, col13, col14, col15, col16, col17, col18, col19, col20, col21, col22, col23, col24, col25, col26 FROM psmv.snapshot where table_name = 'events_statements_summary_by_user_by_event_name';
    INSERT INTO psmv.events_statements_summary_by_thread_by_event_name SELECT ts, server_id, col1, col2, col3, col4, col5, col6, col7, col8, col9, col10, col11, col12, col13, col14, col15, col16, col17, col18, col19, col20, col21, col22, col23, col24, col25, col26 FROM psmv.snapshot where table_name = 'events_statements_summary_by_thread_by_event_name';
    INSERT INTO psmv.events_statements_summary_global_by_event_name SELECT ts, server_id, col1, col2, col3, col4, col5, col6, col7, col8, col9, col10, col11, col12, col13, col14, col15, col16, col17, col18, col19, col20, col21, col22, col23, col24, col25 FROM psmv.snapshot where table_name = 'events_statements_summary_global_by_event_name';
    INSERT INTO psmv.file_summary_by_instance SELECT ts, server_id, col1, col2, col3, col4, col5, col6, col7, col8, col9, col10, col11, col12, col13, col14, col15, col16, col17, col18, col19, col20, col21, col22, col23, col24, col25 FROM psmv.snapshot where table_name = 'file_summary_by_instance';
    INSERT INTO psmv.socket_summary_by_instance SELECT ts, server_id, col1, col2, col3, col4, col5, col6, col7, col8, col9, col10, col11, col12, col13, col14, col15, col16, col17, col18, col19, col20, col21, col22, col23, col24 FROM psmv.snapshot where table_name = 'socket_summary_by_instance';
    INSERT INTO psmv.socket_summary_by_event_name SELECT ts, server_id, col1, col2, col3, col4, col5, col6, col7, col8, col9, col10, col11, col12, col13, col14, col15, col16, col17, col18, col19, col20, col21, col22, col23 FROM psmv.snapshot where table_name = 'socket_summary_by_event_name';
    INSERT INTO psmv.file_summary_by_event_name SELECT ts, server_id, col1, col2, col3, col4, col5, col6, col7, col8, col9, col10, col11, col12, col13, col14, col15, col16, col17, col18, col19, col20, col21, col22, col23 FROM psmv.snapshot where table_name = 'file_summary_by_event_name';
    INSERT INTO psmv.events_waits_history_long SELECT ts, server_id, col1, col2, col3, col4, col5, col6, col7, col8, col9, col10, col11, col12, col13, col14, col15, col16, col17, col18, col19 FROM psmv.snapshot where table_name = 'events_waits_history_long';
    INSERT INTO psmv.events_waits_history SELECT ts, server_id, col1, col2, col3, col4, col5, col6, col7, col8, col9, col10, col11, col12, col13, col14, col15, col16, col17, col18, col19 FROM psmv.snapshot where table_name = 'events_waits_history';
    INSERT INTO psmv.events_waits_current SELECT ts, server_id, col1, col2, col3, col4, col5, col6, col7, col8, col9, col10, col11, col12, col13, col14, col15, col16, col17, col18, col19 FROM psmv.snapshot where table_name = 'events_waits_current';
    INSERT INTO psmv.threads SELECT ts, server_id, col1, col2, col3, col4, col5, col6, col7, col8, col9, col10, col11, col12, col13, col14 FROM psmv.snapshot where table_name = 'threads';
    INSERT INTO psmv.events_stages_current SELECT ts, server_id, col1, col2, col3, col4, col5, col6, col7, col8, col9, col10 FROM psmv.snapshot where table_name = 'events_stages_current';
    INSERT INTO psmv.events_stages_history_long SELECT ts, server_id, col1, col2, col3, col4, col5, col6, col7, col8, col9, col10 FROM psmv.snapshot where table_name = 'events_stages_history_long';
    INSERT INTO psmv.events_stages_history SELECT ts, server_id, col1, col2, col3, col4, col5, col6, col7, col8, col9, col10 FROM psmv.snapshot where table_name = 'events_stages_history';
    INSERT INTO psmv.events_waits_summary_by_account_by_event_name SELECT ts, server_id, col1, col2, col3, col4, col5, col6, col7, col8 FROM psmv.snapshot where table_name = 'events_waits_summary_by_account_by_event_name';
    INSERT INTO psmv.objects_summary_global_by_type SELECT ts, server_id, col1, col2, col3, col4, col5, col6, col7, col8 FROM psmv.snapshot where table_name = 'objects_summary_global_by_type';
    INSERT INTO psmv.events_stages_summary_by_account_by_event_name SELECT ts, server_id, col1, col2, col3, col4, col5, col6, col7, col8 FROM psmv.snapshot where table_name = 'events_stages_summary_by_account_by_event_name';
    INSERT INTO psmv.events_stages_summary_by_user_by_event_name SELECT ts, server_id, col1, col2, col3, col4, col5, col6, col7 FROM psmv.snapshot where table_name = 'events_stages_summary_by_user_by_event_name';
    INSERT INTO psmv.events_stages_summary_by_thread_by_event_name SELECT ts, server_id, col1, col2, col3, col4, col5, col6, col7 FROM psmv.snapshot where table_name = 'events_stages_summary_by_thread_by_event_name';
    INSERT INTO psmv.socket_instances SELECT ts, server_id, col1, col2, col3, col4, col5, col6, col7 FROM psmv.snapshot where table_name = 'socket_instances';
    INSERT INTO psmv.events_waits_summary_by_user_by_event_name SELECT ts, server_id, col1, col2, col3, col4, col5, col6, col7 FROM psmv.snapshot where table_name = 'events_waits_summary_by_user_by_event_name';
    INSERT INTO psmv.events_stages_summary_by_host_by_event_name SELECT ts, server_id, col1, col2, col3, col4, col5, col6, col7 FROM psmv.snapshot where table_name = 'events_stages_summary_by_host_by_event_name';
    INSERT INTO psmv.events_waits_summary_by_thread_by_event_name SELECT ts, server_id, col1, col2, col3, col4, col5, col6, col7 FROM psmv.snapshot where table_name = 'events_waits_summary_by_thread_by_event_name';
    INSERT INTO psmv.events_waits_summary_by_instance SELECT ts, server_id, col1, col2, col3, col4, col5, col6, col7 FROM psmv.snapshot where table_name = 'events_waits_summary_by_instance';
    INSERT INTO psmv.events_waits_summary_by_host_by_event_name SELECT ts, server_id, col1, col2, col3, col4, col5, col6, col7 FROM psmv.snapshot where table_name = 'events_waits_summary_by_host_by_event_name';
    INSERT INTO psmv.events_stages_summary_global_by_event_name SELECT ts, server_id, col1, col2, col3, col4, col5, col6 FROM psmv.snapshot where table_name = 'events_stages_summary_global_by_event_name';
    INSERT INTO psmv.events_waits_summary_global_by_event_name SELECT ts, server_id, col1, col2, col3, col4, col5, col6 FROM psmv.snapshot where table_name = 'events_waits_summary_global_by_event_name';
    INSERT INTO psmv.accounts SELECT ts, server_id, col1, col2, col3, col4 FROM psmv.snapshot where table_name = 'accounts';
    INSERT INTO psmv.session_connect_attrs SELECT ts, server_id, col1, col2, col3, col4 FROM psmv.snapshot where table_name = 'session_connect_attrs';
    INSERT INTO psmv.session_account_connect_attrs SELECT ts, server_id, col1, col2, col3, col4 FROM psmv.snapshot where table_name = 'session_account_connect_attrs';
    INSERT INTO psmv.rwlock_instances SELECT ts, server_id, col1, col2, col3, col4 FROM psmv.snapshot where table_name = 'rwlock_instances';
    INSERT INTO psmv.performance_timers SELECT ts, server_id, col1, col2, col3, col4 FROM psmv.snapshot where table_name = 'performance_timers';
    INSERT INTO psmv.file_instances SELECT ts, server_id, col1, col2, col3 FROM psmv.snapshot where table_name = 'file_instances';
    INSERT INTO psmv.users SELECT ts, server_id, col1, col2, col3 FROM psmv.snapshot where table_name = 'users';
    INSERT INTO psmv.mutex_instances SELECT ts, server_id, col1, col2, col3 FROM psmv.snapshot where table_name = 'mutex_instances';
    INSERT INTO psmv.hosts SELECT ts, server_id, col1, col2, col3 FROM psmv.snapshot where table_name = 'hosts';
    INSERT INTO psmv.cond_instances SELECT ts, server_id, col1, col2 FROM psmv.snapshot where table_name = 'cond_instances';

    SELECT RELEASE_LOCK('ps_snapshot_lock');
    DROP TEMPORARY TABLE psmv.snapshot;
    COMMIT;
  END IF;
END;;
